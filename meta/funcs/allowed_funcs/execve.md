Объявление:

    int execve(const char *path, char *const argv[], char *const envp[]);
    
Header files:

    <unistd.h>


ОПИСАНИЕ
execve() преобразует вызывающий процесс в новый процесс.  Новый процесс создается из обычного файла, на имя которого на имя которого указывает path, называемый файлом нового процесса.  Этот файл является либо исполняемым объектным файлом, либо файлом данных для интерпретатора.  Файл исполняемого объекта состоит из идентифицирующего заголовка, за которым следуют страницы данных, представляющие начальную программу (текст) и инициализированные страницы данных.  В заголовке могут быть указаны дополнительные страницы, которые должны быть инициализированы с нулевыми данными; см. a.out(5).

Файл интерпретатора начинается со строки вида:

   #! interpreter [arg ...].

Когда файл интерпретатора выполняется через execve(), система запускает указанный интерпретатор.  Если указаны какие-либо дополнительные аргументы, они становятся первым (вторым, ...) аргументом интерпретатора. Имя первоначально запущенного через execve() файла становится последующим аргументом; в противном случае имя изначально запущенного через execve() файла становится первым аргументом.  Исходные аргументы к вызову интерпретатора сдвигаются и становятся последними аргументами.  Нулевой аргумент, обычно имя файла, остается неизменным.

Аргумент argv - это указатель на нуль-терминированный массив символьных указателей на нуль-терминированные символьные строки. Эти строки формируют список аргументов, который будет доступен новому процессу.  Хотя бы один аргумент должен присутствовать в массиве; по умолчанию первым элементом должно быть имя выполняемой программы (например, последний компонент path).

Аргумент envp также является указателем на нуль-терминированный массив символьных указателей на нуль-терминированные строки.  A указатель на этот массив обычно хранится в глобальной переменной environ. Эти строки передают новому процессу информацию которая не является непосредственным аргументом команды (см. environ(7)).

Дескрипторы файлов, открытые в образе вызывающего процесса, остаются открытыми в образе нового процесса, за исключением тех, для которых установлен флаг установлен флаг close-on-exec (см. close(2) и fcntl(2)).  Дескрипторы, которые остаются открытыми, не затрагиваются execve().

Сигналы, установленные для игнорирования в вызывающем процессе, будут игнорироваться и в новом процессе. Сигналы, установленные как перехватываемые в образе вызывающего процесса, в образе нового процесса устанавливаются на действие по умолчанию.  Заблокированные сигналы остаются заблокированными независимо от изменений в действии сигнала.  Стек сигналов сбрасывается в неопределенное состояние (более подробную информацию см. в разделе sigaction(2)).

Новый процесс также наследует следующие атрибуты от вызывающего процесса:

идентификатор процесса см. getpid(2)
идентификатор родительского процесса см. getppid(2)
идентификатор группы процессов см. getpgrp(2)
группы доступа см. getgroups(2)
рабочий каталог см. chdir(2)
корневой каталог см. chroot(2)
терминал управления см. termios(4)
использование ресурсов см. getrusage(2)
интервальные таймеры см. getitimer(2)
лимиты ресурсов см. getrlimit(2)
маска файлового режима см. umask(2)
маска сигнала см. sigaction(2), sigsetmask(2)

Когда программа выполняется в результате вызова execve(), она вводится следующим образом:

           main(argc, argv, envp)
           int argc;
           char **argv, **envp;

где argc - количество элементов в argv (``счетчик аргументов''), а argv указывает на массив символьных указателей на самих аргументов.

ВОЗВРАЩАЕМЫЕ ЗНАЧЕНИЯ
Поскольку функция execve() накладывает образ текущего процесса на образ нового процесса, при успешном вызове нет процесса в который можно было бы вернуться.  Если execve() возвращается к вызывающему процессу, то произошла ошибка; возвращаемое значение будет равно -1, а глобальная переменная глобальная переменная errno будет установлена, чтобы указать на ошибку.