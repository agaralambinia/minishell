Объявление:

    int tcgetattr(int fildes, struct termios *termios_p);

    int tcsetattr(int fildes, int optional_actions, const struct termios *termios_p);

Header files:
    <termios.h>

ОПИСАНИЕ
Функции tcgetattr() и tcsetattr() предназначены для получения и установки структуры termios.


ПОЛУЧЕНИЕ И УСТАНОВКА СКОРОСТИ ПЕРЕДАЧИ ДАННЫХ
Входная и выходная скорости передачи данных находятся в структуре termios.  Беззнаковое целое число speed_t типизировано в включаемом файле <termios.h>. Значение целого числа непосредственно соответствует представляемой скорости передачи данных; однако определены следующие символические значения:

     #define B0 0
     #define B50 50
     #define B75 75
     #define B110 110
     #define B134 134
     #define B150 150
     #define B200 200
     #define B300 300
     #define B600 600
     #define B1200 1200
     #define B1800 1800
     #define B2400 2400
     #define B4800 4800
     #define B9600 9600
     #define B19200 19200
     #define B38400 38400
     #ifndef _POSIX_C_SOURCE
     #define EXTA 19200
     #define EXTB 38400
     #endif /*_POSIX_C_SOURCE */

ПОЛУЧЕНИЕ И УСТАНОВКА СОСТОЯНИЯ TERMIOS
В этом разделе описаны функции, используемые для управления общим интерфейсом терминала.  Если не указано иное для конкретной команды, эти функции ограничены от использования фоновыми процессами.  Попытки выполнить эти операции приведут к отправке группе процессов сигнала SIGTTOU.  Если вызывающий процесс блокирует или игнорирует сигналы SIGTTOU, процессу разрешается выполнить операцию и сигнал SIGTTOU не посылается.

Во всех функциях, хотя fildes - это дескриптор открытого файла, функции воздействуют на нижележащий терминальный файл, а не только на описание открытого файла, связанное с конкретным дескриптором файла.

Функция tcgetattr() копирует параметры, связанные с терминалом, на который ссылается fildes, в структуру termios на которую ссылается termios_p.  Эта функция разрешена из фонового процесса; однако атрибуты терминала могут быть последовательно изменены процессом переднего плана.

Функция tcsetattr() устанавливает параметры, связанные с терминалом, из структуры termios, на которую ссылается termios_p.  Поле optional_actions создается путем операции логического ИЛИ(OR) следующих значений, как указано в включаемом файле <termios.h>.

TCSANOW 
Изменение происходит немедленно.

TCSADRAIN 
Изменение происходит после того, как весь вывод, записанный в fildes, будет передан на терминал.  Это значение параметра optional_actions следует использовать при изменении параметров, влияющих на вывод.

TCSAFLUSH 
Изменение происходит после того, как весь вывод, записанный в fildes, будет передан на терминал.  Кроме того, в терминал будет передан любой входные данные, которые были получены, но не прочитаны, отбрасываются.

TCSASOFT 
Если это значение включается через OR в значение optional_actions, значения полей c_cflag, c_ispeed и c_ospeed игнорируются.

Скорость 0 бод используется для завершения соединения.  Если в функции tcsetattr() в качестве выходной скорости указать 0, управление модемом больше не будет подаваться на терминал, что приведет к его разъединению.

Если для функции tcsetattr() в качестве входной скорости указан ноль, то скорость передачи данных на входе будет установлена в то же значение, что и что и выходная скорость передачи данных.

Если функция tcsetattr() не может выполнить ни одно из запрошенных изменений, она возвращает -1 и устанавливает значение errno. В противном случае она выполняет все запрошенные изменения. Если указанные скорости передачи данных на входе и выходе отличаются и представляют собой комбинацию, которая не поддерживается, ни одна из скоростей передачи данных не будет изменена.

После успешного завершения функции tcgetattr() и tcsetattr() возвращают значение 0. В противном случае они возвращают -1 и глобальная переменная errno устанавливается для указания ошибки, как показано ниже:

[EBADF]
The fildes argument to tcgetattr() or tcsetattr() was not a valid file descriptor.

[EINTR]
The tcsetattr() function was interrupted by a signal.

[EINVAL]
The optional_actions argument to the tcsetattr() function was not valid, or an attempt was made to change an attribute represented in the termios structure to an unsupported value.

[ENOTTY]
The file associated with the fildes argument to tcgetattr() or tcsetattr() is not a terminal.